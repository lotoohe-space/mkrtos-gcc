## MKRTOS 是什么

- MKRTOS 全称是 Micro-Kernel Real-Time Operating System，中文名字是微内核实时操作系统。其最终的意义是实现一个小内核，并兼容 Posix 标准的操作系统，使其完全适用于各类嵌入式场合。

### 开发背景

- Cortex-M 在工业控制领域非常火，但是易用的操作系统却非常上，可能有 ucos 这类的操作系统，但是其功能都非常的简单，使用这类 RTOS 都有着一定的学习成本（我也写过一个，可以看看 xTinyRTOS，非常简单）.开发 MKRTOS 的初衷就是兼容 POSIX，以降低学习成本，并且在开发时还考虑到内存的使用，对内存使用进行优化。

### MKRTOS 内核特性

- 1.处理器：默认支持 Cortex-M3 处理器。
- 2.进程间通信：支持信号、消息邮箱、信号量、匿名管道、共享内存。
- 3.文件系统：支持 vfs，并开发了 spfs 文件系统，文件系统支持块缓存。
- 4.可执行文件：在没有 MMU 的处理器上支持可重定向的 ELF 可执行文件。
- 5.内存管理：简单的内存管理。
- 6.多任务，多线程。 
- 7.驱动框架：字符设备与块设备。
- 8.常用驱动：null，tty，tty0，flash。
- 9.以太网支持（部分支持，其它正在开发），采用lwip。

### 系统功能

- 支持的库：dietlibc。
- 支持的应用：lsh，cat，ls，mkdir，uname 等

### 怎么使用？

- 工程为 Clion 工程，利用 CMake+arm-gcc 编译，下载后使用 Clion 编译即可。

### 我的博客

- 欢迎到博客交流（还没有申请域名^-^）：[MKRTOS博客](http://124.222.90.143/)

### 笔记
1. dietlibc移植说明，去掉不需要的cpu相关的文件夹，syscalls.h内__ARGS_mmap改为1 ，并修改mmap.S文件。
2. 修改setjump.S等文件。
3. 所有的.S文件需要增加编译的头。
4. lwip移植
    1.需要完成clone函数的实现。
    2.需要完成信号量、互斥锁、消息邮箱。
    3.需要给struct sock添加引用计数，防止多进程时出现问题，需要对socket，accept，close3个函数进行处理。
    4.一些其它的配置。
5. 其它大量修改（想不起来了）。
